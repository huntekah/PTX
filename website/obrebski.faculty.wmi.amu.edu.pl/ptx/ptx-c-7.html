<html>
  <head>
	<meta charset="ISO-8859-2"/>
  </head>
  
  <body lang=PL>

    <h1 id="cw5">Przetwarzanie tekstu <br> æwiczenia 7</h1>
    <h2>temat: flex</h2>
    
    <h3>Zadania</h3>
    
    <ol>
      
      <li> Zbudowaæ analizator leksykalny dla podzbioru jêzyka C++.
	Program otrzymuje na wej¶ciu kod w C++, na wyj¶cie wypisuje
	informacje o kolejnych napotkanych jednostkach leksykalnych w
	formacie - patrz przyk³ad poni¿ej.

	Uwzglêdniæ nale¿y nastêpuj±ce typy jednostek leksykalnych:
	<ul>
	  <li> s³owa kluczowe (min. 10)
	  <li> identyfikatory
	  <li> nawiasy klamrowe, kwadratowe, zwyk³e
	  <li> operatory (min. 10)
	  <li> ¶rednik
	  <li> litera³y ca³kowite (12, -123), rzeczywiste (0.5, 10.5, .5, 1.2e-10), znakowe ('a', 'b'), 
	    ³añcuchowe ("jaki¶ napis", "trudniejszy \"napis\""),
	</ul>
	
      <li> Komentarze powinny byæ ignorowane.

      <li> Kolejno wystêpuj±ce litera³y ³añcuchowe oddzielone od
	siebie jedynie bia³ymi znakami powinny byæ ³±czone w jeden
	tak, jak to jest w C/C++.

      <li> Nastêpuj±ce typy b³êdów powinny byæ wykrywane i sygnalizowane:
	<ul>
	  <li> nieoczekiwany znak
	  <li> niezakoñczony komentarz
	  <li> niezakoñczona sta³a ³añcuchowa
	</ul>

      <li> W komunikacie o b³êdzie powinien byæ podany nr linii, w której
	on wyst±pi³.
	
	<h5>Przyk³ad:</h5>
	
	<table>
	  <tr><th>wej¶cie:</th>
	  <tr><td></td><td>
	      <pre>
                /*
                 * Przyk³adowy program
                 */

                void main()	// komentarz
                {
                  for(int i=1; i<=10; i++)
                	printf("Hello world..."
                		"czyli Witaj ¶wiecie\n");
                }

                /* komentarz,
                 * który nie jest
                 * zakoñczony
	      </pre>
	    </td>
	  <tr><th>wyj¶cie:</th>
	  <tr><td></td><td>
	      <pre>
		SK_VOID		void
		ID		main
		NAW_OTW		(
		NAW_ZAM		)
		KLAM_OTW	{
		SK_FOR		for
		NAW_OTW		(
		SK_INT		int
		ID		i
		OP_PRZYP	=
		STALA_INT	1
		SRED		;
		ID		i
		OP_LEQ		&lt;=
		STALA_INT	10
		SRED		;
		ID		i
		OP_INC		++
		NAW_ZAM		)
		ID		printf
		NAW_OTW		(
		STALA_LANC	"Hello world...czyli Witaj ¶wiecie\n"
		NAW_ZAM		)
		SRED		;
		KLAM_ZAM	}
		
		BLAD! niezakonczony komentarz w linii 12
	      </pre>
	    </td>
	</table>

    </ol>

    <h3>Wskazówki</h3>

    <ul>

      <li> Nale¿y u¿yæ generatora analizatorów leksykalnych <b><tt>flex</tt></b>

      <li> Specyfikacjê analizatora przygotowujemy w jêzyku <tt>flex</tt> w pliku o rozszerzeniu <b><tt>.l</tt></b> , np. <tt>analizator.l</tt>
	
      <li> Kompilacja specyfikacji:
	<ol>
	  <li> kompilujemy plik <tt>analizator.l</tt> za pomoc± programu <b><tt>flex</tt></b>
	    
	    <pre>

	      flex analizator.l

	    </pre>
	    
	  <li> wynikiem kompilacji jest plik lex.yy.c zawieraj±cy
	    definicjê funkcji yylex() w jêzyku C
	    
	  <li> kompilujemy plik lex.yy.c na program wykonywalny,
	    dostarczaj±c funkcje main() i yywrap() (patrz wyk³ad) z
	    biblioteki flexa (opcja -lfl)

	    <pre>

	      gcc lex.yy.c -lfl

	    </pre>

	</ol>

      <li> dokumentacja flex'a: <a href="ftp://ftp.gnu.org/old-gnu/Manuals/flex-2.5.4/html_mono/flex.html">tu</a>
	

	
    </ul>

  </body>

</html>

